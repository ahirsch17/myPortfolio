<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Effort Track</title>

  <style>

    * {

      margin: 0;

      padding: 0;

      box-sizing: border-box;

    }



    :root {

      color-scheme: dark;

      --sky-400: #38bdf8;

      --sky-500: #0ea5e9;

      --emerald-400: #34d399;

      --emerald-500: #10b981;

      --orange-400: #fb923c;

      --orange-500: #f97316;

      --purple-400: #a78bfa;

      --purple-500: #8b5cf6;

      --red-400: #f87171;

      --red-500: #ef4444;

      --slate-300: #cbd5e1;

      --slate-400: #94a3b8;

      --slate-500: #64748b;

      --slate-700: #334155;

      --slate-800: #1e293b;

      --slate-900: #0f172a;

      --white: #ffffff;

    }



    body {

      background: radial-gradient(circle at 50% -20%, rgba(37,99,235,0.35), rgba(15,23,42,0.92));

      min-height: 100vh;

      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

      color: var(--slate-300);

      line-height: 1.5;

    }



    .glass {

      background: rgba(15, 23, 42, 0.75);

      backdrop-filter: blur(18px);

      border: 1px solid rgba(148, 163, 184, 0.22);

    }



    .rounded-2xl { border-radius: 1rem; }

    .rounded-3xl { border-radius: 1.5rem; }

    .rounded-full { border-radius: 9999px; }



    .text-xs { font-size: 0.75rem; }

    .text-sm { font-size: 0.875rem; }

    .text-lg { font-size: 1.125rem; }

    .text-xl { font-size: 1.25rem; }

    .text-2xl { font-size: 1.5rem; }

    .text-3xl { font-size: 1.875rem; }

    .text-4xl { font-size: 2.25rem; }



    .font-medium { font-weight: 500; }

    .font-semibold { font-weight: 600; }

    .font-bold { font-weight: 700; }



    .flex { display: flex; }

    .grid { display: grid; }

    .hidden { display: none; }

    .items-center { align-items: center; }

    .items-start { align-items: flex-start; }

    .justify-center { justify-content: center; }

    .justify-between { justify-content: space-between; }

    .justify-start { justify-content: flex-start; }



    .gap-2 { gap: 0.5rem; }

    .gap-3 { gap: 0.75rem; }

    .gap-4 { gap: 1rem; }

    .gap-6 { gap: 1.5rem; }



    .space-y-2 > * + * { margin-top: 0.5rem; }

    .space-y-3 > * + * { margin-top: 0.75rem; }

    .space-y-4 > * + * { margin-top: 1rem; }

    .space-y-6 > * + * { margin-top: 1.5rem; }



    .p-3 { padding: 0.75rem; }

    .p-4 { padding: 1rem; }

    .p-5 { padding: 1.25rem; }

    .p-6 { padding: 1.5rem; }

    .px-4 { padding-left: 1rem; padding-right: 1rem; }

    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }

    .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }

    .py-4 { padding-top: 1rem; padding-bottom: 1rem; }



    .mb-2 { margin-bottom: 0.5rem; }

    .mb-3 { margin-bottom: 0.75rem; }

    .mb-4 { margin-bottom: 1rem; }

    .mb-6 { margin-bottom: 1.5rem; }

    .mt-2 { margin-top: 0.5rem; }

    .mt-4 { margin-top: 1rem; }

    .mt-6 { margin-top: 1.5rem; }



    .w-full { width: 100%; }

    .w-16 { width: 4rem; }

    .w-20 { width: 5rem; }

    .h-16 { height: 4rem; }

    .h-20 { height: 5rem; }

    .min-h-screen { min-height: 100vh; }



    .text-center { text-align: center; }

    .text-white { color: var(--white); }

    .text-sky-400 { color: var(--sky-400); }

    .text-orange-400 { color: var(--orange-400); }

    .text-emerald-400 { color: var(--emerald-400); }

    .text-purple-400 { color: var(--purple-400); }

    .text-red-400 { color: var(--red-400); }

    .text-slate-300 { color: var(--slate-300); }

    .text-slate-400 { color: var(--slate-400); }



    .bg-sky-500 { background-color: var(--sky-500); }

    .bg-emerald-500 { background-color: var(--emerald-500); }

    .bg-orange-500 { background-color: var(--orange-500); }

    .bg-purple-500 { background-color: var(--purple-500); }

    .bg-red-500 { background-color: var(--red-500); }

    .bg-slate-700 { background-color: var(--slate-700); }

    .bg-slate-800 { background-color: var(--slate-800); }

    .bg-slate-800\\/50 { background-color: rgba(30, 41, 59, 0.5); }



    .border { border-width: 1px; }

    .border-slate-700 { border-color: var(--slate-700); }



    .cursor-pointer { cursor: pointer; }

    .transition-all { transition: all 0.3s ease; }



    .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }

    .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

    .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }



    .col-span-2 { grid-column: span 2 / span 2; }



    .relative { position: relative; }

    .absolute { position: absolute; }

    .fixed { position: fixed; }

    .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }

    .z-50 { z-index: 50; }



    .max-w-md { max-width: 28rem; }

    .max-w-2xl { max-width: 42rem; }

    .max-h-\[90vh\] { max-height: 90vh; }



    .overflow-y-auto { overflow-y: auto; }



    .loading-spinner {

      border: 3px solid rgba(148, 163, 184, 0.3);

      border-radius: 50%;

      border-top: 3px solid var(--sky-400);

      width: 40px;

      height: 40px;

      animation: spin 1s linear infinite;

    }



    @keyframes spin {

      0% { transform: rotate(0deg); }

      100% { transform: rotate(360deg); }

    }



    button {

      background: rgba(15, 23, 42, 0.75);

      border: 1px solid rgba(148, 163, 184, 0.22);

      border-radius: 1rem;

      color: var(--slate-300);

      padding: 1rem 1.5rem;

      cursor: pointer;

      outline: none;

      transition: all 0.3s ease;

      font-size: 1rem;

      font-weight: 600;

    }



    button:hover {

      background: rgba(255, 255, 255, 0.1);

      transform: translateY(-2px);

    }



    button.primary {

      background: var(--sky-500);

      color: white;

      border: none;

    }



    button.primary:hover {

      background: var(--sky-400);

    }



    .workout-card {

      padding: 2rem;

      border-radius: 2rem;

      border: 2px solid var(--slate-700);

      background: rgba(15, 23, 42, 0.9);

      transition: all 0.3s ease;

      text-align: center;

      cursor: pointer;

    }



    .workout-card:hover {

      border-color: var(--sky-400);

      transform: translateY(-4px) scale(1.02);

    }



    .workout-card.selected {

      border-color: var(--emerald-500);

      background: rgba(16, 185, 129, 0.1);

    }



    .intensity-dot {

      width: 12px;

      height: 12px;

      border-radius: 50%;

      background: var(--slate-700);

      transition: all 0.3s ease;

    }



    .intensity-dot.active {

      transform: scale(1.2);

    }



    .intensity-dot.low.active { background: var(--emerald-500); }

    .intensity-dot.medium.active { background: var(--orange-500); }

    .intensity-dot.high.active { background: var(--red-500); }



    .effort-ring {

      width: 200px;

      height: 200px;

      border-radius: 50%;

      background: conic-gradient(var(--emerald-500) 0%, var(--slate-700) 0%);

      display: flex;

      align-items: center;

      justify-content: center;

      position: relative;

      transition: all 0.5s ease;

    }



    .effort-ring::before {

      content: '';

      position: absolute;

      width: 160px;

      height: 160px;

      background: var(--slate-900);

      border-radius: 50%;

    }



    .effort-score {

      position: relative;

      z-index: 2;

      text-align: center;

    }



    .science-tip {

      border-left: 4px solid var(--purple-500);

      background: rgba(139, 92, 246, 0.1);

      padding: 1rem;

      border-radius: 0.5rem;

      font-size: 0.875rem;

    }



    .pulse-glow {

      animation: pulse-glow 2s infinite;

    }



    @keyframes pulse-glow {

      0%, 100% { 

        box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);

      }

      50% { 

        box-shadow: 0 0 40px rgba(16, 185, 129, 0.8);

      }

    }



    .slide-in {

      animation: slideIn 0.5s ease-out;

    }



    @keyframes slideIn {

      from {

        opacity: 0;

        transform: translateY(20px);

      }

      to {

        opacity: 1;

        transform: translateY(0);

      }

    }



    /* Apple Watch Styling */

    .apple-watch {

      width: 180px;

      height: 220px;

      background: #000;

      border-radius: 50px;

      border: 8px solid #1e293b;

      position: relative;

      overflow: hidden;

    }



    .watch-screen {

      width: 100%;

      height: 100%;

      background: linear-gradient(135deg, #0f172a, #1e293b);

      border-radius: 40px;

      display: flex;

      flex-direction: column;

      align-items: center;

      justify-content: center;

      padding: 20px;

      position: relative;

    }



    .watch-crown {

      position: absolute;

      right: -12px;

      top: 50%;

      transform: translateY(-50%);

      width: 8px;

      height: 40px;

      background: #334155;

      border-radius: 4px;

    }



    .heart-rate {

      font-size: 2rem;

      font-weight: 700;

      color: var(--red-400);

      margin-bottom: 8px;

    }



    .heart-beat {

      animation: heartbeat 1.5s ease-in-out infinite;

    }



    @keyframes heartbeat {

      0%, 100% { transform: scale(1); }

      50% { transform: scale(1.1); }

    }



    .watch-metric {

      font-size: 0.875rem;

      color: var(--slate-400);

    }



    /* Muscle Visualization */

    .body-visualization {

      width: 160px;

      height: 280px;

      position: relative;

      margin: 0 auto;

      display: flex;

      align-items: center;

      justify-content: center;

    }

    

    /* Base body silhouette using SVG */

    .body-visualization::before {

      content: '';

      position: absolute;

      width: 100%;

      height: 100%;

      background-image: url("data:image/svg+xml,%3Csvg width='160' height='280' viewBox='0 0 160 280' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M 80 20 Q 100 20 110 35 Q 115 45 115 60 Q 115 75 110 85 L 110 95 Q 115 105 115 120 Q 115 135 110 145 L 110 155 Q 115 165 115 180 Q 115 195 110 205 L 110 220 Q 115 230 115 245 Q 115 260 110 270 L 50 270 Q 45 260 45 245 Q 45 230 50 220 L 50 205 Q 45 195 45 180 Q 45 165 50 155 L 50 145 Q 45 135 45 120 Q 45 105 50 95 L 50 85 Q 45 75 45 60 Q 45 45 50 35 Q 60 20 80 20 Z' fill='rgba(148,163,184,0.15)' stroke='rgba(148,163,184,0.25)' stroke-width='1.5'/%3E%3C/svg%3E");

      background-size: contain;

      background-repeat: no-repeat;

      background-position: center;

      opacity: 0.6;

      z-index: 0;

    }



    .muscle-group {

      position: absolute;

      background: rgba(148, 163, 184, 0.15);

      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

      border: 2px solid rgba(148, 163, 184, 0.25);

      opacity: 0.5;

      z-index: 1;

    }



    .muscle-group.active {

      background: rgba(34, 197, 94, 0.35);

      border-color: rgba(34, 197, 94, 0.9);

      box-shadow: 

        0 0 20px rgba(34, 197, 94, 0.6),

        inset 0 0 25px rgba(34, 197, 94, 0.25);

      opacity: 1;

      animation: musclePulse 2s ease-in-out infinite;

    }



    @keyframes musclePulse {

      0%, 100% { 

        transform: scale(1);

        box-shadow: 

          0 0 20px rgba(34, 197, 94, 0.6),

          inset 0 0 25px rgba(34, 197, 94, 0.25);

      }

      50% { 

        transform: scale(1.1);

        box-shadow: 

          0 0 30px rgba(34, 197, 94, 0.8),

          inset 0 0 35px rgba(34, 197, 94, 0.35);

      }

    }



    /* Chest - wider, more natural upper torso */

    .chest-muscles { 

      width: 70px; 

      height: 45px; 

      top: 40px; 

      left: 45px; 

      border-radius: 35px 35px 20px 20px;

      background: radial-gradient(ellipse at center, rgba(148, 163, 184, 0.2), rgba(148, 163, 184, 0.1));

    }

    .chest-muscles.active {

      background: radial-gradient(ellipse at center, rgba(34, 197, 94, 0.4), rgba(34, 197, 94, 0.2));

    }

    

    /* Arms - more natural, slightly curved */

    .arms-muscles { 

      width: 24px; 

      height: 80px; 

      top: 50px; 

      border-radius: 12px;

      background: linear-gradient(to bottom, rgba(148, 163, 184, 0.2), rgba(148, 163, 184, 0.15));

    }

    .arms-muscles.active {

      background: linear-gradient(to bottom, rgba(34, 197, 94, 0.4), rgba(34, 197, 94, 0.3));

    }

    .left-arm { 

      left: 20px; 

      transform: rotate(-8deg);

    }

    .right-arm { 

      right: 20px; 

      transform: rotate(8deg);

    }

    .left-arm.active, .right-arm.active {

      transform: rotate(0deg) scale(1.1);

    }

    

    /* Legs - more natural, slightly tapered */

    .legs-muscles { 

      width: 28px; 

      height: 90px; 

      bottom: 20px; 

      border-radius: 14px 14px 8px 8px;

      background: linear-gradient(to bottom, rgba(148, 163, 184, 0.2), rgba(148, 163, 184, 0.15));

    }

    .legs-muscles.active {

      background: linear-gradient(to bottom, rgba(34, 197, 94, 0.4), rgba(34, 197, 94, 0.3));

    }

    .left-leg { 

      left: 50px; 

      transform: rotate(-3deg);

    }

    .right-leg { 

      right: 50px; 

      transform: rotate(3deg);

    }

    .left-leg.active, .right-leg.active {

      transform: rotate(0deg) scale(1.1);

    }

    

    /* Core - more defined abdominal area */

    .core-muscles { 

      width: 45px; 

      height: 65px; 

      top: 90px; 

      left: 57.5px; 

      border-radius: 22px 22px 18px 18px;

      background: linear-gradient(to bottom, rgba(148, 163, 184, 0.2), rgba(148, 163, 184, 0.15));

    }

    .core-muscles.active {

      background: linear-gradient(to bottom, rgba(34, 197, 94, 0.4), rgba(34, 197, 94, 0.3));

    }



    /* Interactive Controls */

    .intensity-control {

      display: flex;

      gap: 1rem;

      justify-content: center;

    }



    .intensity-option {

      padding: 1rem 1.5rem;

      border-radius: 1rem;

      border: 2px solid var(--slate-700);

      background: transparent;

      color: var(--slate-400);

      cursor: pointer;

      transition: all 0.3s ease;

      text-align: center;

      min-width: 80px;

    }



    .intensity-option:hover {

      border-color: var(--sky-400);

      transform: translateY(-2px);

    }



    .intensity-option.selected {

      border-color: var(--emerald-500);

      background: var(--emerald-500);

      color: white;

    }



    .intensity-option.low.selected { background: var(--emerald-500); border-color: var(--emerald-500); }

    .intensity-option.medium.selected { background: var(--orange-500); border-color: var(--orange-500); }

    .intensity-option.high.selected { background: var(--red-500); border-color: var(--red-500); }



    .duration-control {

      background: rgba(30, 41, 59, 0.5);

      border-radius: 2rem;

      padding: 1rem;

      display: flex;

      align-items: center;

      justify-content: space-between;

    }



    .duration-btn {

      width: 40px;

      height: 40px;

      border-radius: 50%;

      background: var(--slate-700);

      border: none;

      color: var(--slate-300);

      font-size: 1.25rem;

      cursor: pointer;

      transition: all 0.3s ease;

      display: flex;

      align-items: center;

      justify-content: center;

    }



    .duration-btn:hover {

      background: var(--slate-600);

      transform: scale(1.1);

    }



    .duration-value {

      font-size: 1.5rem;

      font-weight: 700;

      color: var(--white);

      min-width: 60px;

      text-align: center;

    }



    @media (min-width: 768px) {

      .md\\:p-6 { padding: 1.5rem; }

      .md\\:text-3xl { font-size: 1.875rem; }

      .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

      .md\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }

    }



    @media (min-width: 1024px) {

      .lg\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }

    }

  </style>

</head>

<body>

  <div id="root">

    <div class="flex flex-col items-center justify-center min-h-screen">

      <div class="glass rounded-3xl p-8 max-w-md text-center">

        <div class="loading-spinner mx-auto mb-4"></div>

        <h2 class="text-xl font-bold text-white mb-2">Starting Effort Track</h2>

        <p class="text-slate-400">Connecting to your fitness journey...</p>

      </div>

    </div>

  </div>



  <script>

    function initializeApp() {

      // Muscle activation data for different exercises

      const muscleActivations = {

        running: ['legs'],

        cycling: ['legs', 'core'],

        weights: ['chest', 'arms', 'core'],

        hiit: ['chest', 'arms', 'legs', 'core'],

        yoga: ['core']

      };



      // Science-based calculations

      function calculateEffort(workout) {

        let baseScore = 0;

        const intensityMap = { low: 1, medium: 2, high: 3 };

        

        if (workout.type === 'cardio') {

          baseScore = workout.duration * intensityMap[workout.intensity];

        } else {

          baseScore = workout.sets * intensityMap[workout.intensity] * 2;

        }

        

        return Math.min(baseScore, 100);

      }



      function calculateHeartRate(workout) {

        const baseHR = 70;

        const intensityBonus = { low: 20, medium: 40, high: 60 };

        return baseHR + intensityBonus[workout.intensity] + Math.floor(Math.random() * 10);

      }



      // Application state

      const state = {

        currentView: 'start',

        selectedWorkout: null,

        workoutHistory: []

      };



      // Workout options

      const workouts = [

        {

          id: 'running',

          name: 'Running',

          type: 'cardio',

          icon: 'üèÉ',

          color: 'text-sky-400',

          description: 'Improve cardiovascular health',

          defaultDuration: 30

        },

        {

          id: 'cycling',

          name: 'Cycling', 

          type: 'cardio',

          icon: 'üö¥',

          color: 'text-orange-400',

          description: 'Build endurance and leg strength',

          defaultDuration: 45

        },

        {

          id: 'weights',

          name: 'Weight Training',

          type: 'strength', 

          icon: 'üèãÔ∏è',

          color: 'text-emerald-400',

          description: 'Build muscle and strength',

          defaultSets: 12

        },

        {

          id: 'hiit',

          name: 'HIIT',

          type: 'cardio',

          icon: '‚ö°',

          color: 'text-purple-400',

          description: 'High intensity intervals',

          defaultDuration: 20

        },

        {

          id: 'yoga',

          name: 'Yoga',

          type: 'flexibility',

          icon: 'üßò',

          color: 'text-slate-300',

          description: 'Improve flexibility and mindfulness',

          defaultDuration: 40

        }

      ];



      function renderApp() {

        const root = document.getElementById('root');

        

        if (state.currentView === 'start') {

          renderStartView(root);

        } else if (state.currentView === 'customize') {

          renderCustomizeView(root);

        } else if (state.currentView === 'results') {

          renderResultsView(root);

        }

      }



      function renderStartView(root) {

        root.innerHTML = `

          <div class="min-h-screen p-4 md:p-6">

            <!-- Header -->

            <div class="text-center mb-8 slide-in">

              <h1 class="text-4xl font-bold text-white mb-4">Effort Track</h1>

              <p class="text-slate-400 text-lg">Connect your watch. Track real effort.</p>

            </div>

            

            <!-- Workout Selection -->

            <div class="glass rounded-3xl p-6 mb-6 slide-in">

              <h2 class="text-xl font-semibold text-white mb-6 text-center">Choose Your Workout</h2>



              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">

                ${workouts.map((workout, index) => `

                  <div class="workout-card ${state.selectedWorkout?.id === workout.id ? 'selected' : ''}" 

                       onclick="app.selectWorkoutById('${workout.id}')">

                    <div class="text-4xl mb-3 ${workout.color}">${workout.icon}</div>

                    <div class="font-semibold text-white mb-2">${workout.name}</div>

                    <div class="text-slate-400 text-sm">${workout.description}</div>

                  </div>

                `).join('')}

              </div>

            </div>



            <!-- Science Tip -->

            <div class="science-tip slide-in">

              <p class="text-purple-400 font-medium mb-1">üî¨ Science-Based Tracking</p>

              <p class="text-slate-300 text-sm">Effort Track uses heart rate data and muscle activation patterns to calculate your true training load.</p>

                    </div>



            ${state.selectedWorkout ? `

              <div class="text-center mt-6 slide-in">

                <button class="primary w-full max-w-md py-4 text-lg pulse-glow" onclick="app.setState({ currentView: 'customize' })">

                  Start ${state.selectedWorkout.name}

                </button>

                      </div>

            ` : ''}

                    </div>

        `;

      }



      function renderCustomizeView(root) {

        const workout = state.selectedWorkout;

        const isCardio = workout.type === 'cardio';

        const heartRate = calculateHeartRate(workout);

        const activeMuscles = muscleActivations[workout.id] || [];

        

        root.innerHTML = `

          <div class="min-h-screen p-4 md:p-6">

            <!-- Header -->

            <div class="flex items-center justify-between mb-6">

              <button onclick="app.setState({ currentView: 'start' })" class="px-4 py-2">

                ‚Üê Back

              </button>

              <div class="text-center">

                <h1 class="text-2xl font-bold text-white">${workout.name}</h1>

                <p class="text-slate-400">Adjust your workout intensity</p>

                  </div>

              <div class="w-16"></div>

              </div>

              

            <!-- Visual Dashboard -->

            <div class="grid grid-cols-2 gap-6 mb-8">

              <!-- Apple Watch -->

              <div class="flex justify-center">

                <div class="apple-watch">

                  <div class="watch-screen">

                    <div class="heart-rate heart-beat">${heartRate}</div>

                    <div class="watch-metric">BPM</div>

                    <div class="watch-metric mt-2">${workout.intensity || 'medium'} intensity</div>

                  </div>

                  <div class="watch-crown"></div>

                </div>

              </div>

              

              <!-- Muscle Activation -->

              <div class="flex justify-center">

                <div class="body-visualization">

                  <div class="muscle-group chest-muscles ${activeMuscles.includes('chest') ? 'active' : ''}"></div>

                  <div class="muscle-group arms-muscles left-arm ${activeMuscles.includes('arms') ? 'active' : ''}"></div>

                  <div class="muscle-group arms-muscles right-arm ${activeMuscles.includes('arms') ? 'active' : ''}"></div>

                  <div class="muscle-group legs-muscles left-leg ${activeMuscles.includes('legs') ? 'active' : ''}"></div>

                  <div class="muscle-group legs-muscles right-leg ${activeMuscles.includes('legs') ? 'active' : ''}"></div>

                  <div class="muscle-group core-muscles ${activeMuscles.includes('core') ? 'active' : ''}"></div>

                    </div>

              </div>

            </div>



            <!-- Effort Score -->

            <div class="glass rounded-3xl p-6 mb-6 text-center">

              <div class="text-3xl font-bold text-emerald-400 mb-2">${calculateEffort(workout)}</div>

              <div class="text-slate-400">Current Effort Score</div>

                    </div>



            <!-- Interactive Controls -->

            <div class="glass rounded-3xl p-6 mb-6">

              <h3 class="text-white font-semibold mb-4 text-center">Workout Intensity</h3>

              

              <div class="intensity-control mb-6">

                ${['low', 'medium', 'high'].map(intensity => `

                  <div class="intensity-option ${intensity} ${workout.intensity === intensity ? 'selected' : ''}" 

                       onclick="app.updateWorkoutParam('intensity', '${intensity}')">

                    <div class="font-semibold capitalize">${intensity}</div>

                    <div class="text-xs mt-1">

                      ${intensity === 'low' ? 'Recovery' : intensity === 'medium' ? 'Training' : 'Peak'}

                    </div>

                  </div>

                `).join('')}

              </div>



              ${isCardio ? `

                <div>

                  <h3 class="text-white font-semibold mb-4 text-center">Duration</h3>

                  <div class="duration-control">

                    <button class="duration-btn" onclick="app.adjustDuration(-5)">-</button>

                    <div class="duration-value">${workout.duration || workout.defaultDuration}m</div>

                    <button class="duration-btn" onclick="app.adjustDuration(5)">+</button>

                    </div>

                </div>

              ` : `

                <div>

                  <h3 class="text-white font-semibold mb-4 text-center">Sets</h3>

                  <div class="duration-control">

                    <button class="duration-btn" onclick="app.adjustSets(-1)">-</button>

                    <div class="duration-value">${workout.sets || workout.defaultSets}</div>

                    <button class="duration-btn" onclick="app.adjustSets(1)">+</button>

                    </div>

                  </div>

                `}

              </div>

              

            <!-- Science Insight -->

            <div class="science-tip mb-6">

              <p class="text-purple-400 font-medium mb-1">üí° Real-time Analysis</p>

              <p class="text-slate-300 text-sm">

                ${isCardio ? 

                  'Heart rate zones √ó duration = training load (TRIMP method)' :

                  'Sets √ó intensity = muscle stimulus (RPE research)'

      }

              </p>

            </div>



            <!-- Action Button -->

            <button class="primary w-full py-4 text-lg pulse-glow" onclick="app.completeWorkout()">

              Complete Workout

            </button>

          </div>

        `;

      }



      function renderResultsView(root) {

        const latestWorkout = state.workoutHistory[0];

        const effortScore = latestWorkout.effortScore;

        const effortLevel = effortScore < 40 ? 'low' : effortScore < 70 ? 'medium' : 'high';



        root.innerHTML = `

          <div class="min-h-screen p-4 md:p-6">

            <!-- Header -->

            <div class="text-center mb-8">

              <h1 class="text-3xl font-bold text-white mb-2">Workout Complete! üéâ</h1>

              <p class="text-slate-400">Great effort on your ${latestWorkout.name} session</p>

              </div>



            <!-- Results Display -->

            <div class="glass rounded-3xl p-8 mb-6 text-center">

              <div class="text-5xl font-bold text-emerald-400 mb-2">${effortScore}</div>
            
              <div class="text-xl text-white font-semibold mb-4">Effort Score</div>



              <div class="flex justify-center mb-4">

                <div class="px-4 py-2 rounded-full ${

                  effortLevel === 'low' ? 'bg-emerald-500' : 

                  effortLevel === 'medium' ? 'bg-orange-500' : 'bg-red-500'

                } text-white text-sm font-semibold">

                  ${effortLevel.toUpperCase()} EFFORT

                  </div>

                </div>



              <div class="text-slate-400 text-sm">

                ${effortLevel === 'low' ? 'Perfect for active recovery days' :

                  effortLevel === 'medium' ? 'Ideal for consistent training' :

                  'Excellent high-intensity session!'}

                </div>

              </div>


            
            <!-- Workout Summary -->

            <div class="glass rounded-3xl p-6 mb-6">

              <h3 class="text-white font-semibold mb-4">Session Details</h3>

              <div class="space-y-3">

                <div class="flex justify-between">

                  <span class="text-slate-400">Activity</span>

                  <span class="text-white">${latestWorkout.icon} ${latestWorkout.name}</span>

                </div>

                ${latestWorkout.type === 'cardio' ? `

                  <div class="flex justify-between">

                    <span class="text-slate-400">Duration</span>

                    <span class="text-white">${latestWorkout.duration} minutes</span>

                        </div>

                ` : `

                  <div class="flex justify-between">

                    <span class="text-slate-400">Sets</span>

                    <span class="text-white">${latestWorkout.sets}</span>

                </div>

                `}

                <div class="flex justify-between">

                  <span class="text-slate-400">Intensity</span>

                  <span class="text-white capitalize">${latestWorkout.intensity}</span>

                </div>

                <div class="flex justify-between">

                  <span class="text-slate-400">Avg Heart Rate</span>

                  <span class="text-red-400">${calculateHeartRate(latestWorkout)} BPM</span>

                        </div>

                      </div>

                    </div>



            <!-- Future Integration -->

            <div class="science-tip">

              <p class="text-purple-400 font-medium mb-1">üì± Coming Soon</p>

              <p class="text-slate-300 text-sm">Connect your Apple Watch or Fitbit for real-time heart rate tracking and automatic workout detection!</p>

            </div>

            

            <!-- Action Buttons -->

            <div class="grid grid-cols-2 gap-4 mt-6">

              <button onclick="app.setState({ currentView: 'start' })" class="py-4">

                New Workout

              </button>

              <button class="primary py-4" onclick="app.viewHistory()">

                View History

              </button>

            </div>

          </div>

        `;

      }



      // Expose functions globally

      window.app = {

        setState: (newState) => {

          Object.assign(state, newState);

          renderApp();

        },

        

        selectWorkoutById: (workoutId) => {

          const workout = workouts.find(w => w.id === workoutId);

          if (workout) {

            state.selectedWorkout = {

              ...workout,

              duration: workout.defaultDuration,

              sets: workout.defaultSets,

              intensity: 'medium'

            };

            renderApp();

          }

        },

        

        updateWorkoutParam: (param, value) => {

          if (state.selectedWorkout) {

            state.selectedWorkout[param] = value;

          renderApp();

          }

        },

        

        adjustDuration: (change) => {

          if (state.selectedWorkout) {

            const newDuration = (state.selectedWorkout.duration || state.selectedWorkout.defaultDuration) + change;

            state.selectedWorkout.duration = Math.max(10, Math.min(120, newDuration));

          renderApp();

          }

        },

        

        adjustSets: (change) => {

          if (state.selectedWorkout) {

            const newSets = (state.selectedWorkout.sets || state.selectedWorkout.defaultSets) + change;

            state.selectedWorkout.sets = Math.max(3, Math.min(20, newSets));

            renderApp();

          }

        },

        

        completeWorkout: () => {

          if (state.selectedWorkout) {

            const effortScore = calculateEffort(state.selectedWorkout);

            const workoutRecord = {

              ...state.selectedWorkout,

              effortScore: effortScore,

              date: new Date().toLocaleDateString(),

              timestamp: Date.now()

            };

            

            state.workoutHistory.unshift(workoutRecord);

            state.currentView = 'results';

            renderApp();

          }

        },

        

        viewHistory: () => {

          alert(`Workout History:\n\n${

            state.workoutHistory.slice(0, 5).map((w, i) => 

              `${i + 1}. ${w.icon} ${w.name}: ${w.effortScore} effort (${w.date})`

            ).join('\n')

          }`);

        }

      };



      // Initial render

      renderApp();

    }



    // Start the application

    setTimeout(initializeApp, 100);

  </script>

</body>

</html>
